---
layout: post
title: "负载平衡问题（供求平衡）"
date: 2014-11-26 17:48:57 +0800
comments: true
categories: ['线性规划与网络流24题']
---
###负载平衡问题

####问题描述： 
G公司有n个沿铁路运输线环形排列的仓库，每个仓库存储的货物数量不等。如何用最少搬运量可以使n个仓库的库存数量相同。搬运货物时，只能在相邻的仓库之间搬运。 

####编程任务： 
对于给定的n个环形排列的仓库的库存量， 编程计算使n 个仓库的库存数量相同的最少搬运量。 

####数据输入： 
由文件 input.txt 提供输入数据。文件的第 1 行中有 1 个正整数 n（n<=100） ，表示有 n个仓库。第2行中有 n个正整数，表示n个仓库的库存量。 

####数据输入： 
由文件 input.txt 提供输入数据。文件的第 1 行中有 1 个正整数 n（n<=100） ，表示有 n个仓库。第2行中有 n个正整数，表示n个仓库的库存量。 

####结果输出: 
程序运行结束时，将计算出的最少搬运量输出到文件output.txt中。 

####输入文件示例： 
5 
17 9 14 16 4

####输出文件示例：
11

---
###解决方案：

 
#### 1.问题分析：  
转化为供求平衡问题，用最小费用最大流解决。  
 
#### 2.建模方法：  
首先求出所有仓库存货量平均值，设第i个仓库的盈余量为A[i]，A[i] = 第i个仓库原有存货量 - 平均存货量。建立二分图，把每个仓库抽象为两 个节点Xi和Yi。增设附加源S汇T。  
 
>- 如果A[i] > 0，从S向Xi连一条容量为A[i]，费用为0的有向边。 
>- 如果A[i] < 0，从Yi向T连一条容量为 - A[i]，费用为0的有向边。  
>- 每个Xi向两个相邻顶点j，从Xi到Yj连接一条容量为无穷大，费用为1的有向边。  
>- 每个Xi向两个相邻顶点j，从Xi到Xj连接一条容量为无穷大，费用为1的有向边。  
 
求最小费用最大流，最小费用流值就是最少搬运量。  

#### 3.建模分析：  
>- 计算出每个仓库的盈余后，可以把问题转化为供求问题。  
>- 建立供求网络，把二分图X集合中所有节点看做供应节点，Y集合所有节点看做需求节点。  
>- 在能一次搬运满足供需的Xi和Yj之间连接一条费用为1的有向边，表示搬运一个单位货物费用为1。   -- 建图中的第(3)步  
>- 另外还要在Xi与相邻的Xj之间连接边，表示货物可以暂时搬运过去，不立即满足需求，费用也为1。 -- 建图中的第(4)步  
>- 最大流满足了所有的盈余和亏损供求平衡，最小费用就是最少搬运量。  

